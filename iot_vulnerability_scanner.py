import shodan 


SHODAN_API_KEY = "2KI5BByGu4TkBeZjYLHcTPUAZUGnWWk9"
api = shodan.Shodan(SHODAN_API_KEY)


def search_shodan(query):
    try:
        query = "webcam"
        
        results = api.search(query)
        print(f"Results found: {results['total']}")
        for result in results['matches']:
            print(f"IP: {result['ip_str']}")
            print(f"Port: {result['port']}")
            print(f"Organization: {result.get('org', 'n/a')}")
            print(f"Location: {result.get('location', 'n/a')}")
            print(f"Hostname: {result.get('hostnames', 'n/a')}")
            print(f"Data: {result['data']}")
            print(f"Banner: {result['data']}")
            print("----")
        
    except shodan.APIError as e:
        print(f"Error: {e}")
        

search_shodan("webcam")
    # search_shodan("webcamXP")  # Uncomment this line to run the search